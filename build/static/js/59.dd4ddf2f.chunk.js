(this.webpackJsonp13rms=this.webpackJsonp13rms||[]).push([[59],{857:function(e,t,a){"use strict";a.r(t);var c=a(33),i=a.n(c),r=a(55),s=a(3),n=a(12),l=a(10),o=a(60),d=a(190),u=a(34),b=a(104),m=a(166),p=a(198),j=a(233),f=a(69),h=a(191),O=a(170),g=a(8),x=a(119),v=a(61),N=a(44),w=a(25),P=a(57),y=a(1),D=a(29),q=a(35),S=a(17),A=a(37),I=a(90),C=a(2);t.default=function(e){var t,a,c=e.userData,k=function(e,t){return"".concat(e," must be atleast ").concat(t," characters")},E=I.a({productName:I.c().required("Product name is required").min(8,k("Product Name",8)).max(200,(t="Product Name",a=200,"".concat(t," must be maximum ").concat(a," characters"))),productDescription:I.c().required("Product description is required").min(50,k("Product Description",50)),details:I.c().required("Product details is required").min(50,k("Product details",50)),price:I.c().required("Price is required").matches(/^[0-9.]+$/,"Must be only digits")}),T=Object(v.b)().setNotification,z=Object(q.useMutation)(o.b),L=Object(q.useMutation)(o.c,{onSuccess:function(e){var t=e.data.data,a=t.id,i=t.name,r=e.data.message;T({show:!0,title:r,buttonText:"View",buttonUrl:g.a.getProductUrl(a)}),z.mutate({postData:{text:"".concat(c.fullName," has posted a product: ").concat(i,"."),postType:"product",customInId:a}})}}),M=L.mutate,R=L.isLoading,U=L.isError,F=L.error,B=L.isSuccess,J=Object(y.useState)([]),V=Object(l.a)(J,2),W=V[0],X=V[1],$=Object(y.useRef)(),G=Object(q.useMutation)(o.A,{onSuccess:function(e){var t=Object(w.map)(e.data.data,(function(e,t){return{id:Object(P.a)(24),url:e.location,isCover:0===t,alt:""}}));_&&_.current&&M(Object(s.a)(Object(s.a)({},_.current.values),{},{images:t}))}}),H=G.mutate,K=G.isLoading,Q=function(){var e=new FormData;Object(w.forEach)(W,(function(t){e.append("images",t)})),setTimeout((function(){H(e)}),500)},Y=Object(S.g)();Object(y.useEffect)((function(){var e;B&&Y.push(g.a.getProfileById(c.profileUrl,(null===c||void 0===c||null===(e=c.other)||void 0===e?void 0:e.template)||1))}),[B]);var Z=function(){var e=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=Object(y.useRef)();return Object(C.jsxs)(x.a,{userData:c,children:[Object(C.jsx)(f.a,{pageTitle:"Add Product"}),Object(C.jsx)(h.a,{fontWeight:"font-bold mb-8",children:"Add New Product"}),Object(C.jsx)(N.b,{innerRef:_,initialValues:{images:[],productName:"",productDescription:"",availableColors:[],availableSizes:[],tags:[],estimatedDelivery:"In 7 days",price:"",details:"",features:[],highlights:[]},validationSchema:E,onSubmit:Z,children:Object(C.jsxs)(N.a,{className:"space-y-8",children:[Object(C.jsx)(b.a,{label:"Product Name",id:"productName",name:"productName",autoFocus:!0,required:!0,placeholder:"Eg. Programming T-shirts"}),Object(C.jsxs)("div",{children:[W&&W.length>0&&Object(C.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 mb-8 gap-8",children:W.map((function(e,t){return e&&Object(C.jsx)("img",{className:"shadow-lg  rounded-lg",src:URL.createObjectURL(e),alt:"People working on laptops"})}))}),Object(C.jsx)("input",{ref:$,className:"hidden",multiple:!0,type:"file",onChange:function(e){var t=Object.values(e.target.files);t.length>0&&(t.forEach((function(e){return W.push(e)})),X((function(e){return Object(n.a)(e)})))},accept:"image/x-png,image/jpeg"}),Object(C.jsx)("div",{className:"flex items-center gap-x-4",children:Object(C.jsx)(u.a,{onClick:function(){var e;return null===$||void 0===$||null===(e=$.current)||void 0===e?void 0:e.click()},size:"lg",invert:!0,gradient:!0,Icon:D.e,label:"+ Add Images"})})]}),Object(C.jsx)(b.a,{label:"Product Description",id:"productDescription",name:"productDescription",placeholder:"Tell your customer about the product in brief",required:!0,textarea:!0,rows:4,cols:255}),Object(C.jsx)(b.a,{label:"Details",id:"details",name:"details",placeholder:"What includes in product?",required:!0,textarea:!0,rows:2,cols:255}),Object(C.jsxs)("div",{className:"flex items-center w-full space-x-6",children:[Object(C.jsx)(m.a,{className:"w-1/2",label:"Available Colors",disableFieldOption:!0,name:"availableColors",placeholder:"Available colors for product",list:A.c}),Object(C.jsx)(m.a,{className:"w-1/2",sortBy:"id",disableFieldOption:!0,label:"Available Sizes",name:"availableSizes",placeholder:"XS,M,XL",list:A.h})]}),Object(C.jsxs)("div",{className:"flex items-start w-full space-x-6",children:[Object(C.jsx)(b.a,{label:"Product Price",id:"price",gridClass:"w-1/2",type:"number",props:{step:"2",min:0},name:"price",required:!0,placeholder:"99"}),Object(C.jsx)(p.a,{required:!0,list:Object(w.map)(Object(w.times)(30),(function(e){return{name:"In ".concat(e+1," days"),id:e.toString()}})),className:"w-1/2",name:"estimatedDelivery",placeholder:"In 3 days",label:"Estimated Delivery"})]}),Object(C.jsx)(j.a,{name:"tags"}),Object(C.jsx)(O.a,{name:"features"}),Object(C.jsx)(O.a,{name:"highlights"}),Object(C.jsx)("div",{className:"flex items-center justify-end",children:Object(C.jsx)(u.a,{type:"submit",rounded:"rounded-lg",loading:R||K,gradient:!0,size:"lg",label:"Add product"})}),U&&Object(C.jsx)(d.a,{errors:[F.toString()]})]})})]})}}}]);
//# sourceMappingURL=59.dd4ddf2f.chunk.js.map