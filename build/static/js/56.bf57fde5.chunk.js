(this.webpackJsonp13rms=this.webpackJsonp13rms||[]).push([[56],{849:function(e,t,a){"use strict";a.r(t);var n=a(33),i=a.n(n),r=a(55),s=a(10),c=a(34),l=a(485),d=a(118),o=a(679),m=a(490),u=a(677),b=a(44),j=a(6),p=a(632),h=a(1),f=a(633),x=a(90),v=a(552),O=a(203),g=a.n(O),y=a(193),k=a.n(y),w=a(2),S={loop:!1,autoplay:!0,animationData:v,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};t.default=function(){var e=Object(p.a)(),t=Object(s.a)(e,3),a=t[0],n=t[1],v=t[2],O=Object(h.useState)("initial"),y=Object(s.a)(O,2),N=y[0],C=y[1],I=function(e,t,a){n(),C("sending"),u.a.send(f.a.serviceID,f.a.template.resetPassordTemplateId,{link:t,to_email:e,expiresIn:k()(Number(a)).format("LT")},f.a.userId).then((function(e){v(),C("sent")}),(function(e){C("failed")}))},P=x.a({email:x.c().email("Invalid email address").required("Please add verified email address")}),R=Object(h.useState)(!1),T=Object(s.a)(R,2),q=T[0],D=T[1],E=Object(h.useState)(""),J=Object(s.a)(E,2),L=J[0],M=J[1],V=function(){var e=Object(r.a)(i.a.mark((function e(t,a){var n,r,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.prev=1,e.next=4,j.f.post("/user/verifyEmail",{email:t});case 4:n=e.sent,(r=n.data).data.verified?"function"===typeof a&&(s=r.data,c=s.link,l=s.expiresIn,M(""),a(c,l)):M(r.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("@error while verifyng email. @verifyEmail: ",e.t0.message);case 12:return e.prev=12,D(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,a){return e.apply(this,arguments)}}(),W=Object(b.d)({initialValues:{email:""},onSubmit:function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t.email,(function(e,a){return I(t.email,e,a)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:P});return Object(w.jsxs)(w.Fragment,{children:[a&&"sent"!==N&&Object(w.jsxs)(l.a,{open:a,setOpen:v,hideCloseBtn:"failed"!==N,children:[Object(w.jsx)(o.a,{emailSendingStatus:N,onCancel:v}),Object(w.jsx)("input",{className:"h-0 w-0"})]}),Object(w.jsx)(m.a,{title:"Reset password",children:Object(w.jsx)("div",{className:"mt-8 mb-36 sm:mx-auto sm:w-full sm:max-w-md",children:Object(w.jsxs)("div",{className:"bg-white dark:bg-gray-900 border border-transparent dark:border-gray-700 py-8 px-4 shadow-md sm:rounded-lg sm:px-6",children:["sent"!==N&&Object(w.jsxs)("form",{onSubmit:W.handleSubmit,children:[Object(w.jsx)(d.a,{onChange:W.handleChange,value:W.values.email,autoComplete:!1,label:"Please enter verified email",name:"email",error:W.errors.email||L,id:"email"}),Object(w.jsx)("div",{className:"mt-5 sm:mt-4 flex justify-end  items-center",children:Object(w.jsx)(c.a,{gradient:!0,disabled:q||"sending"===N,loading:q||"sending"===N,loadingText:q?"Verifying your email":"Sending reset link",label:"Send Reset Request",fullWidth:!0,type:"submit"})})]}),"sent"===N&&Object(w.jsxs)("div",{children:[Object(w.jsx)(g.a,{options:S,height:300,width:300}),Object(w.jsxs)("p",{className:"text-center dark:text-white",children:["We have sent a reset link to your email.",Object(w.jsx)("br",{})," Please check your inbox."]}),Object(w.jsxs)("p",{className:"text-center dark:text-gray-400 mt-4",children:["Link not received yet?"," ",Object(w.jsx)("span",{onClick:function(){return C("initial")},className:"hover:underline cursor-pointer",children:"resend email"})," "]})]})]})})})]})}}}]);
//# sourceMappingURL=56.bf57fde5.chunk.js.map