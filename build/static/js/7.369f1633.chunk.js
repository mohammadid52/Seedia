(this.webpackJsonp13rms=this.webpackJsonp13rms||[]).push([[7],{2048:function(e,t,c){"use strict";c.r(t);var a=c(10),n=c.n(a),o=c(3),i=c(18),r=c(6),s=c(1),l=c(12),u=c(56),d=c(78),b=c(85),h=c(28),j=c(44),p=c(30),O=c(130),m=c(16),v=c(54),y=c(13),f=c(11),g=c(127),x=c(65),S=c(32),N=c(2),C=c(295);t.default=function(e){var t=e.user,c=Object(s.useState)(!0),a=Object(r.a)(c,1)[0],A=Object(h.g)(),w=Object(s.useState)(!1),E=Object(r.a)(w,2),T=E[0],q=E[1];Object(s.useEffect)((function(){!function(){if(t){var e,c,a,n,o,i;if(null===t||void 0===t||null===(e=t.other)||void 0===e?void 0:e.accountFilled)return console.log("redirect to dashboard"),A.push(m.a.DASHBAORD);if("location"===(null===(c=t.other)||void 0===c?void 0:c.accountFinishedStep))return console.log("redirect to choose template page"),A.push(m.a.CHOOSE_TEMPLATE);if("company"===(null===(a=t.other)||void 0===a?void 0:a.accountFinishedStep))return console.log("redirect to location page"),A.push(m.a.LOCATION_P);if("chooseAccount"===(null===(n=t.other)||void 0===n?void 0:n.accountFinishedStep))return console.log("get the accountType and redirect as per account type"),A.push(Object(f.f)(null===(i=t.other)||void 0===i?void 0:i.accountType));if("signup"===(null===(o=t.other)||void 0===o?void 0:o.accountFinishedStep))console.log("redirect to choose Account page"),A.push(m.a.CHOOSE_ACCOUNT)}}()}),[]);var k=Object(S.b)().setValues,F=function(){var e=Object(i.a)(n.a.mark((function e(c){var a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(f.a)(),q(!0),i=Object(o.a)(Object(o.a)({},t),{},{location:Object(o.a)(Object(o.a)({},null===t||void 0===t?void 0:t.location),{},{country:c.country,pincode:c.pincode,state:c.state,city:c.city,livesIn:"".concat(c.city," ").concat(c.country)}),other:Object(o.a)(Object(o.a)({},null===t||void 0===t?void 0:t.other),{},{accountFilled:!1,accountFinishedStep:"location"})}),e.next=6,f.e.post("/user/update",Object(o.a)({},i),{headers:{Authorization:a}});case 6:delete i.password,k(Object(o.a)({},i)),A.push(m.a.CHOOSE_TEMPLATE),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,q(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),M=p.a({state:p.c().required(),country:p.c().required(),city:p.c().required(),pincode:p.c().required().matches(/^[0-9]+$/,"Must be only digits").min(6,"Must be exactly 6 digits").max(6,"Must be exactly 6 digits")}),P=Object(s.useState)({country:{shortName:"",longName:""},state:"",city:""}),H=Object(r.a)(P,2),_=H[0],D=H[1],I=C.getCountries(),L=function(e){return[{name:e,disabled:!0}]},B=Object(s.useState)([]),J=Object(r.a)(B,2),U=J[0],V=J[1],W=Object(s.useState)([]),z=Object(r.a)(W,2),R=z[0],Y=z[1];return a?Object(N.jsx)(v.a,{title:"Welcome, ".concat((null===t||void 0===t?void 0:t.firstName)||"Human","!"),subtitle:Object(N.jsx)("p",{children:"Create a profile, connect with acquaintances and discuss topics that interest you."}),children:Object(N.jsxs)(x.a,{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[Object(N.jsx)("div",{className:"bg-white  border border-transparent dark:border-gray-700  dark:bg-gray-800 py-8 px-4 shadow-md sm:rounded-lg sm:px-6",children:Object(N.jsx)(j.c,{initialValues:O.e,validationSchema:M,onSubmit:F,children:Object(N.jsxs)(j.b,{className:"space-y-6",children:[Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{label:"Country / region",list:I,name:"country",required:!0,placeholder:"Select country",onSelect:function(e){!function(e){var t=C.getStatesByShort(e),c=Object(y.map)(t,(function(e){return{name:e}}));c&&c.length>0?V(c):V(L("No state found for selected country."))}(e.shortName),D(Object(o.a)(Object(o.a)({},_),{},{country:{shortName:e.shortName,longName:e.name}}))}})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{label:"State",list:U,name:"state",required:!0,placeholder:"Select state",onSelect:function(e){!function(e,t){var c=C.getCities(e,t),a=Object(y.map)(c,(function(e){return{name:e}}));a&&a.length>0?Y(a):Y(L("No city found for selected state."))}(_.country.shortName,e.name),D(Object(o.a)(Object(o.a)({},_),{},{state:e.name}))}})}),Object(N.jsx)("div",{children:Object(N.jsx)(g.a,{label:"Ctiy",name:"city",list:R,required:!0,placeholder:"Select city",onSelect:function(e){D(Object(o.a)(Object(o.a)({},_),{},{city:e.name}))}})}),Object(N.jsx)(u.a,{label:"Postal Code",id:"pincode",name:"pincode",placeholder:"Postal Code",required:!0}),Object(N.jsx)("div",{children:Object(N.jsx)(l.a,{fullWidth:!0,rounded:"rounded-lg",type:"submit",gradient:!0,loading:T,label:"Finish Submit"})})]})})}),Object(N.jsx)(d.a,{text:"Edit company details",onClick:function(){A.push(t&&t.other&&"personal"===(null===t||void 0===t?void 0:t.other.accountType)?m.a.COMPANY:m.a.EDUCATION)},className:"inline-block mt-4"})]})}):Object(N.jsx)(b.a,{})}}}]);
//# sourceMappingURL=7.369f1633.chunk.js.map